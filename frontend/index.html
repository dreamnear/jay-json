<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Professional JSON formatter, validator, and tools for developers"/>
    <link rel="stylesheet" href="/style.css"/>
    <title>Jay JSON - Professional JSON Formatter & Validator</title>
</head>
<body>
<div class="app-container">
    <!-- Title Bar -->
    <header class="title-bar" role="banner">
        <div class="title-bar-content">
            <span class="title-bar-title">Jay JSON</span>
        </div>
        <div class="title-bar-actions" role="toolbar" aria-label="Window Controls">
            <!-- Theme Selector -->
            <div class="theme-selector">
                <button class="theme-btn" id="themeBtn" aria-label="Theme" aria-haspopup="true" aria-expanded="false">
                    <svg class="theme-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                </button>
                <div class="theme-menu" id="themeMenu" role="menu" aria-label="Theme Options">
                    <div class="theme-option" data-value="system" role="menuitemradio" aria-checked="true" tabindex="0">
                        <span class="theme-radio"></span>
                        <svg class="theme-option-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                        <span class="theme-option-name">System</span>
                    </div>
                    <div class="theme-option" data-value="light" role="menuitemradio" aria-checked="false" tabindex="0">
                        <span class="theme-radio"></span>
                        <svg class="theme-option-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                        <span class="theme-option-name">Light</span>
                    </div>
                    <div class="theme-option" data-value="dark" role="menuitemradio" aria-checked="false" tabindex="0">
                        <span class="theme-radio"></span>
                        <svg class="theme-option-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <span class="theme-option-name">Dark</span>
                    </div>
                </div>
            </div>
            <button class="title-bar-btn" onclick="openNewWindow()" title="Open New Window (⌘N)" aria-label="New Window">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
                </svg>
            </button>
            <button class="title-bar-btn" onclick="toggleAlwaysOnTop()" id="pin-btn" title="Keep Window on Top (⌘P)" aria-label="Pin Window">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Tab Bar -->
    <nav class="tab-bar" role="tablist" aria-label="JSON Files">
        <div class="tabs-container" id="tabs-container">
            <!-- Tabs will be dynamically inserted here -->
        </div>
        <button class="new-tab-btn" onclick="newTab()" title="New Tab (⌘T)" aria-label="New Tab">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
            </svg>
        </button>
    </nav>

    <!-- Main Content -->
    <main class="main-content" role="main">
        <!-- Editor Panel -->
        <section class="panel editor-panel" id="editor-panel" aria-labelledby="editor-title">
            <div class="panel-header">
                <div class="panel-header-left">
                    <button class="collapse-btn" onclick="togglePanel('editor')" title="Collapse Panel" aria-label="Collapse Panel" aria-expanded="true">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <h2 id="editor-title" class="panel-title">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                        </svg>
                        Editor
                    </h2>
                </div>
                <div class="panel-actions" role="toolbar" aria-label="Editor Actions">
                    <button class="action-btn primary" onclick="formatJSON()" title="Format JSON (⌘↵)" aria-label="Format JSON">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h7" />
                        </svg>
                        <span>Format</span>
                    </button>
                    <button class="action-btn" onclick="undoCheckpoint()" id="undo-btn" title="Undo (⌘Z)" aria-label="Undo" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6" />
                        </svg>
                        <span>Undo</span>
                    </button>
                    <button class="action-btn" onclick="redoCheckpoint()" id="redo-btn" title="Redo (⌘⇧Z)" aria-label="Redo" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6" />
                        </svg>
                        <span>Redo</span>
                    </button>
                    <button class="action-btn" onclick="clearEditor()" title="Clear Editor (⌘⇧K)" aria-label="Clear Editor">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                        <span>Clear</span>
                    </button>
                </div>
            </div>
            <div class="editor-container">
                <div class="editor-line-numbers" id="editor-line-numbers">1</div>
                <div class="json-input-wrapper">
                    <div id="json-editor-highlighted" class="json-input-highlighted" aria-hidden="true"></div>
                    <textarea
                        id="json-editor"
                        class="json-input"
                        placeholder="Paste or type JSON here…"
                        spellcheck="false"
                        aria-label="JSON Editor Input"
                    ></textarea>
                </div>
            </div>
        </section>

        <!-- Tree View Panel -->
        <section class="panel preview-panel" id="preview-panel" aria-labelledby="preview-title">
            <div class="panel-header">
                <div class="panel-header-left">
                    <button class="collapse-btn" onclick="togglePanel('preview')" title="Collapse Panel" aria-label="Collapse Panel" aria-expanded="true">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                    <h2 id="preview-title" class="panel-title">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z" />
                        </svg>
                        Tree View
                    </h2>
                </div>
                <div class="panel-actions" role="toolbar" aria-label="Preview Actions">
                    <button class="action-btn" onclick="copyOutput()" title="Copy Formatted JSON (⌘C)" aria-label="Copy Formatted JSON">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                        <span>Copy</span>
                    </button>
                    <button class="action-btn" onclick="copyAsMinified()" title="Copy Minified JSON" aria-label="Copy Minified JSON">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                        <span>Copy Minify</span>
                    </button>
                    <button class="action-btn secondary" onclick="openInWindow()" title="Open in New Window (⌘⇧O)" aria-label="Open in New Window">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                        <span>Open in Window</span>
                    </button>
                </div>
            </div>
            <div id="output-display" class="json-tree-view" role="region" aria-live="polite" aria-label="JSON Tree View">
                <div class="preview-placeholder">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                    </svg>
                    <span>Interactive tree view will appear here…</span>
                </div>
            </div>
        </section>
    </main>

    <!-- Status Bar -->
    <footer class="status-bar" role="contentinfo">
        <span class="status-item" id="status-message">Ready</span>
        <span id="validation-status" class="status-badge" role="status" aria-live="polite"></span>
        <span class="char-count" id="char-count" aria-label="Character Count">0 chars</span>
        <span class="status-item">Jay JSON v1.0</span>
    </footer>
</div>
<script type="module" src="/src/main.js"></script>
</body>
</html>
